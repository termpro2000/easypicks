# ë¯¸ë˜ì½”ë¦¬ì•„ ë°°ì†¡ê´€ë¦¬ ì‹œìŠ¤í…œ - ë°ì´í„°ë² ì´ìŠ¤ ERD

## ğŸ“Š ë°ì´í„°ë² ì´ìŠ¤ êµ¬ì„±ë„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ë¯¸ë˜ì½”ë¦¬ì•„ ë°°ì†¡ê´€ë¦¬ ì‹œìŠ¤í…œ DB                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        users          â”‚        â”‚       deliveries         â”‚        â”‚      delivery_details          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ”‘ id (PK)           â”‚        â”‚ ğŸ”‘ id (PK)              â”‚        â”‚ ğŸ”‘ id (PK)                    â”‚
â”‚ ğŸ”’ user_id (UNIQUE)  â”‚        â”‚ ğŸ”’ tracking_number (UK) â”‚        â”‚ ğŸ”— delivery_id (FK)           â”‚
â”‚ ğŸ” password          â”‚        â”‚ ğŸ‘¤ sender_name          â”‚        â”‚ ğŸ“‹ request_type                â”‚
â”‚ ğŸ‘¤ name              â”‚        â”‚ ğŸ“ sender_address        â”‚        â”‚ ğŸ—ï¸ construction_type           â”‚
â”‚ ğŸ“ phone             â”‚        â”‚ ğŸ‘¤ receiver_name         â”‚        â”‚ ğŸ“¦ shipment_type               â”‚
â”‚ â° created_at        â”‚        â”‚ ğŸ“ receiver_address      â”‚        â”‚ ğŸ“… visit_date                  â”‚
â”‚ â° updated_at        â”‚        â”‚ ğŸ“ receiver_phone        â”‚        â”‚ â° visit_time                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚ ğŸ“¦ package_type          â”‚        â”‚ ğŸ¢ furniture_company           â”‚
                                â”‚ âš–ï¸ weight                â”‚        â”‚ ğŸš¨ emergency_contact           â”‚
                                â”‚ ğŸ“Š status                â”‚        â”‚ ğŸ­ warehouse_info              â”‚
                                â”‚ ğŸš› assigned_driver_id    â”‚        â”‚ ğŸ“– order_guidance             â”‚
                                â”‚ â° created_at            â”‚        â”‚ ğŸ“¢ pre_notification           â”‚
                                â”‚ â° updated_at            â”‚        â”‚ ğŸ  building_type              â”‚
                                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚ ğŸ¢ floor_count                â”‚
                                                                   â”‚ ğŸ›— elevator_available          â”‚
                                                                   â”‚ ğŸš¶ stair_movement              â”‚
                                                                   â”‚ ğŸš› ladder_truck                â”‚
                                                                   â”‚ ğŸ—‘ï¸ disposal                    â”‚
                                                                   â”‚ ğŸšª room_movement               â”‚
                                                                   â”‚ ğŸ”§ wall_construction           â”‚
                                                                   â”‚ ğŸ’° tollgate_cost               â”‚
                                                                   â”‚ ğŸ“ main_memo                   â”‚
                                                                   â”‚ ğŸ˜Š happy_call_memo             â”‚
                                                                   â”‚ ğŸ“¦ product_info                â”‚
                                                                   â”‚ ğŸª‘ furniture_request           â”‚
                                                                   â”‚ ğŸš› driver_memo                 â”‚
                                                                   â”‚ â° created_at                  â”‚
                                                                   â”‚ â° updated_at                  â”‚
                                                                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                                         â”‚ 1                              â”‚ 1
                                         â”‚                                â”‚
                                         â”‚ has                            â”‚ has
                                         â”‚                                â”‚
                                         â”‚ *                              â”‚ *
                                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                â”‚   (ê´€ê³„ ì—†ìŒ)    â”‚                â”‚   delivery_id   â”‚
                                â”‚                 â”‚                â”‚   references    â”‚
                                â”‚   usersëŠ”       â”‚                â”‚   deliveries.id â”‚
                                â”‚   ì¸ì¦ìš©ìœ¼ë¡œë§Œ   â”‚                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚   ì‚¬ìš©ë¨        â”‚
                                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ—ï¸ í…Œì´ë¸” ìƒì„¸ ì •ë³´

### 1. `users` í…Œì´ë¸” - ì‚¬ìš©ì ì •ë³´
- **ëª©ì **: ê¸°ì‚¬ ë¡œê·¸ì¸ ì¸ì¦ ê´€ë¦¬
- **ì£¼ìš” í•„ë“œ**:
  - `user_id`: ê¸°ì‚¬ ë¡œê·¸ì¸ ì•„ì´ë”” (UNIQUE)
  - `password`: ì•”í˜¸í™”ëœ ë¹„ë°€ë²ˆí˜¸
  - `name`: ê¸°ì‚¬ ì´ë¦„
  - `phone`: ì—°ë½ì²˜

### 2. `deliveries` í…Œì´ë¸” - ê¸°ë³¸ ë°°ì†¡ ì •ë³´
- **ëª©ì **: ë°°ì†¡ì˜ í•µì‹¬ ì •ë³´ ì €ì¥
- **ì£¼ìš” í•„ë“œ**:
  - `tracking_number`: ìš´ì†¡ì¥ë²ˆí˜¸ (UNIQUE)
  - `sender_*`: ë°œì†¡ì¸ ì •ë³´
  - `receiver_*`: ìˆ˜ì·¨ì¸ ì •ë³´
  - `status`: ë°°ì†¡ ìƒíƒœ (pending, in_transit, delivered, cancelled)
  - `assigned_driver_id`: ë‹´ë‹¹ ê¸°ì‚¬ ID

### 3. `delivery_details` í…Œì´ë¸” - í™•ì¥ ë°°ì†¡ ì •ë³´
- **ëª©ì **: ê°€êµ¬/ì„¤ì¹˜ ê´€ë ¨ ìƒì„¸ ë°°ì†¡ ì •ë³´ ì €ì¥
- **ì£¼ìš” í•„ë“œ**:
  - `request_type`: ë°°ì†¡ ìš”ì²­ ìœ í˜•
  - `construction_type`: ì„¤ì¹˜ ìœ í˜•
  - `furniture_company`: ê°€êµ¬ ì—…ì²´
  - `building_type`: ê±´ë¬¼ ìœ í˜•
  - `elevator_available`: ì—˜ë¦¬ë² ì´í„° ìœ ë¬´
  - `main_memo`: ì£¼ìš” ë©”ëª¨
  - `driver_memo`: ê¸°ì‚¬ ë©”ëª¨

## ğŸ”— ê´€ê³„ ì„¤ëª…

1. **users â†” deliveries**: ì§ì ‘ì ì¸ ê´€ê³„ ì—†ìŒ
   - usersëŠ” ì¸ì¦ìš©ìœ¼ë¡œë§Œ ì‚¬ìš©
   - deliveriesì˜ assigned_driver_idëŠ” í˜„ì¬ users.idë¥¼ ì°¸ì¡°í•˜ì§€ ì•ŠìŒ

2. **deliveries â†” delivery_details**: 1:1 ê´€ê³„
   - delivery_details.delivery_id â†’ deliveries.id
   - ê° ë°°ì†¡ë§ˆë‹¤ í•˜ë‚˜ì˜ ìƒì„¸ ì •ë³´ ë ˆì½”ë“œ

## ğŸ“ˆ ë°ì´í„° íë¦„

```
1. ê¸°ì‚¬ ë¡œê·¸ì¸ â†’ users í…Œì´ë¸” ì¡°íšŒ
2. ë°°ì†¡ ëª©ë¡ ì¡°íšŒ â†’ deliveries í…Œì´ë¸” ì¡°íšŒ
3. ë°°ì†¡ ìƒì„¸ ì¡°íšŒ â†’ deliveries + delivery_details JOIN
4. ë°°ì†¡ ìƒíƒœ ì—…ë°ì´íŠ¸ â†’ deliveries.status ì—…ë°ì´íŠ¸
```

## ğŸš€ í™•ì¥ ê°€ëŠ¥ì„±

### ì¶”í›„ ê°œì„  ë°©ì•ˆ:
1. **usersì™€ deliveries ì—°ê²°**: assigned_driver_idë¥¼ users.idì™€ ì™¸ë˜í‚¤ë¡œ ì—°ê²°
2. **ë°°ì†¡ íˆìŠ¤í† ë¦¬ í…Œì´ë¸”**: ìƒíƒœ ë³€ê²½ ì´ë ¥ ì¶”ì 
3. **ì•Œë¦¼ í…Œì´ë¸”**: ì‹¤ì‹œê°„ ì•Œë¦¼ ê´€ë¦¬
4. **íŒŒì¼ ì²¨ë¶€ í…Œì´ë¸”**: ë°°ì†¡ ê´€ë ¨ ì´ë¯¸ì§€/ë¬¸ì„œ ì €ì¥

## ğŸ’¾ í˜„ì¬ ìƒíƒœ

- **PlanetScale MySQL** ì‚¬ìš©
- **ì™¸ë˜í‚¤ ì œì•½ì¡°ê±´ ì—†ìŒ** (PlanetScale íŠ¹ì„±)
- **ë”ë¯¸ ë°ì´í„°** í¬í•¨ìœ¼ë¡œ ê°œë°œ/í…ŒìŠ¤íŠ¸ ì§€ì›
- **ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸** WebSocket ì§€ì›
